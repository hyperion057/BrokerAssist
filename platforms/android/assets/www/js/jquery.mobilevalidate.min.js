(function(c){c.fn.mobilevalidate=function(k){var b=c.extend({trigger:"submit",find:'select:not(:disabled)[name],textarea:not(:disabled)[name],input:not(:disabled)[type!="submit"][type!="button"][type!="image"][type!="hidden"][name]',"class":"validate-error",novalidate:!1,css:".validate-error {box-shadow: 0px 0px 12px #e10000;}",dialog:"#errordialog",transition:"slideup",title:"Please correct the following:",delimiter:"\n - ",bind:{text:"change",select:"change"},add:function(a,e){c(a).is('input[type="radio"]')||
c(a).is('input[type="checkbox"]')?c('input[name="'+c(a).attr("name")+'"]').each(function(){c('label[for="'+c(this).attr("id")+'"]').addClass(e["class"])}):c(a).is("textarea")?c(a).addClass(e["class"]):c(a).parent().addClass(e["class"])},remove:function(a,e){c(a).is('input[type="radio"]')||c(a).is('input[type="checkbox"]')?c('input[name="'+c(a).attr("name")+'"]').each(function(){c('label[for="'+c(this).attr("id")+'"]').removeClass(e["class"])}):c(a).is("textarea")?c(a).removeClass(e["class"]):c(a).parent().removeClass(e["class"])},
validate:function(a,e,d,b){if("true"==c(e).jqmData("validate")){b||d.remove(e,d);if(c(e).is('input[type="radio"]')||c(e).is('input[type="checkbox"]')){var f=c(e).attr("name"),j=c('input[name="'+f+'"]').attr("required");if(c(e).is('input[type="radio"]')){if(j&&(f=c('input[name="'+f+'"]:checked').val(),null==f||""===f)){if(b)return!1;d.error(a,e,d)}}else if(j&&!c('input[name="'+f+'"]:checked').map(function(){return c(e).val()}).length){if(b)return!1;d.error(a,e,d)}}else{var j=c(e).attr("pattern"),f=
c(e).val(),h=c(e).jqmData("match");if(c(e).attr("required"))if(h&&d.fields[h].validate){if(!d.fields[h].validate(e)){if(b)return!1;d.error(a,e,d)}}else if(j){if(j=RegExp(j.replace(/^\//,"").replace(/\/$/,"")),null==f||""===f||!j.test(f)){if(b)return!1;d.error(a,e,d)}}else{if(null==f||""===f){if(b)return!1;d.error(a,e,d)}}else if(!(null==f||""===f)&&h&&d.fields[h].validate){if(!d.fields[h].validate(e)){if(b)return!1;d.error(a,e,d)}}else if(!(null==f||""===f)&&j)if(j=RegExp(j),!j.test(f)){if(b)return!1;
d.error(a,e,d)}}return!0}},error:function(a,b,d){var g=c(a).jqmData("error").count;g++;var f=c(a).jqmData("error").messages;f.push(c(b).jqmData("message"));c(a).jqmData("error",{count:g,messages:f});d.add(b,d)},label:function(a){var b=c(a).attr("id"),d=c(a).attr("name"),g="";c(a).is('input[type="radio"]')||c(a).is('input[type="checkbox"]')?(g=c(a).parent().parent().prev().text().replace(/\s*:$/,""))||(g=d.toLowerCase().replace(/\b[a-z]/g,function(a){return a.toUpperCase()})):(b&&(a=c('label[for="'+
b+'"]'))&&(g=a.first().text().replace(/\s*:$/,"")),g||(g=d.toLowerCase().replace(/\b[a-z]/g,function(a){return a.toUpperCase()})));return g},fail:function(){return!1},success:function(){return!0},alert:function(a,b,d){c(d.dialog).length?(a="\n<ul>\n"+c.map(b,function(a){return"<li>"+a+"</li>"}).join("\n")+"\n</ul>",d.title&&(a="<h2>"+d.title+"</h2>"+a),b=c(d.dialog).find('div:jqmData(role="content")'),b.length?c(b.get(0)).html(a):c(d.dialog).html(a),c.mobile.changePage(c(d.dialog),{transition:d.transition,
reverse:!1,changeHash:!0})):alert(d.title+d.delimiter+b.join(d.delimiter));return!1},messages:{input:'Enter "%FIELDNAME%"',checkbox:'Check one or more "%FIELDNAME%"',radio:'Choose "%FIELDNAME%"',select:'Select an option from "%FIELDNAME%"',textarea:'Fill in the "%FIELDNAME%"'},fields:{integer:{pattern:/^-?\s*[0-9]+$/,message:'Enter an integer for "%FIELDNAME%"'},numeric:{pattern:/^-?\s*[0-9]+\.?[0-9]*$|^-?\s*\.[0-9]+$/,message:'Enter a number for "%FIELDNAME%"'},"float":{pattern:/^-?\s*[0-9]+\.[0-9]+$/,
message:'Enter a number for "%FIELDNAME%"'},postcode:{pattern:/^\d{3,4}$/,message:'Enter a valid "%FIELDNAME%"'},datetime:{pattern:/^(0?[1-9]|[1-2][0-9]|3[0-1])\/(0?[1-9]|1[0-2])\/[0-9]{4}|([0-9]{4}\-0?[1-9]|1[0-2])\-(0?[1-9]|[1-2][0-9]|3[0-1])\s+[0-9]{1,2}:[0-9]{2}$/,message:'Enter DD/MM/YYYY HH:SS for "%FIELDNAME%"'},date:{pattern:/^(0?[1-9]|[1-2][0-9]|3[0-1])\/(0?[1-9]|1[0-2])\/[0-9]{4}|([0-9]{4}\-0?[1-9]|1[0-2])\-(0?[1-9]|[1-2][0-9]|3[0-1])$/,message:'Enter DD/MM/YYYY for "%FIELDNAME%"'},time:{pattern:/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/,
message:'Enter HH:SS for "%FIELDNAME%"'},month:{pattern:/^(0?[1-9]|[1-2][0-9]|3[0-1])\-(0?[1-9]|1[0-2])$/,message:'Enter YYYY-MM for "%FIELDNAME%"'},first_name:{pattern:/^[a-zA-Z]+[- ]?[a-zA-Z]*$/},last_name:{pattern:/^[a-zA-Z]+[- ]?[a-zA-Z]+\s*,?([a-zA-Z]+|[a-zA-Z]+\.)?$/},email:{pattern:/^[\w\-\+\._]+\@[a-zA-Z0-9][-a-zA-Z0-9\.]*\.[a-zA-Z]+$/},confirm_password:{validate:function(a){var b=c(a).closest("form").find('input[type="password"][name!="'+c(a).attr("name")+'"]'),d=c(a).val();if(c(a).attr("required")){if(null==
d||""===d||b.length&&d!=b.val())return!1}else if(!(null==d||""===d)&&b.length&&d!=b.val())return!1;return!0},message:'"%FIELDNAME%" must match "Password"'},password:{pattern:/^[\w.!?@#$%&*]{5,}$/,message:'Enter "%FIELDNAME%" with minimum 5 characters'},money:{pattern:/^\-?\d{1,11}(\.\d{2})?$/},percentage:{pattern:/^-?\s*[0-9]+\.?[0-9]*$|^-?\s*\.[0-9]+$/},file:{pattern:/^[\w\s.!?@#$\(\)\'\_\-:%&*\/\\\\\[\]]+$/,message:'Choose a file for "%FIELDNAME%"'}}},k),h=this;k=h.selector;h.jqmData(k)||(b.novalidate&&
c(h).attr("novalidate","novalidate"),b.css&&c('<style type="text/css"></style>').html(b.css).appendTo("head"),c(h).find(b.find).each(function(){var a=c(this);if(a.is('input[type="radio"]')||a.is('input[type="checkbox"]')){var e=a.attr("name"),d=c('input[name="'+e+'"]').jqmData("validate");if(!d){a.jqmData("validate","true");var g=a.jqmData("message");if(!g){var f=b.label(this);c.map(b.fields,function(b,c){!a.jqmData("match")&&e.match(c)&&(b.message&&(g=b.message.replace("%FIELDNAME%",f)),a.jqmData("match",
c))});g||(g=a.is('input[type="radio"]')?b.messages.radio.replace("%FIELDNAME%",f):b.messages.checkbox.replace("%FIELDNAME%",f));a.jqmData("message",g)}c('input[name="'+e+'"]').bind(b.bind.select,function(){b.validate(h,a,b,1)?b.remove(a,b):b.add(a,b)})}}else{var d=a.jqmData("validate"),j=a.attr("required"),k=a.attr("pattern"),g=a.jqmData("message");if(!d||j||k||g)a.jqmData("validate","true"),a.attr("id"),e=a.attr("name"),f=b.label(this),c.map(b.fields,function(b,c){if(!a.jqmData("match")&&e.match(c)){if(!k&&
b.pattern){var d=b.pattern+"";a.attr("pattern",d.substring(1,d.length-1))}g||b.message&&(g=b.message.replace("%FIELDNAME%",f));a.jqmData("match",c)}}),g||(a.is("input")?(d=a.attr("type"),g=b.messages[d]?b.messages[d].replace("%FIELDNAME%",f):b.messages.input.replace("%FIELDNAME%",f)):a.is("select")?g=b.messages.select.replace("%FIELDNAME%",f):a.is("textarea")&&(g=b.messages.textarea.replace("%FIELDNAME%",f))),a.jqmData("message")||a.jqmData("message",g),a.is("select")?a.bind(b.bind.select,function(){b.validate(h,
a,b,1)?b.remove(a,b):b.add(a,b)}):a.bind(b.bind.text,function(){b.validate(h,a,b,1)?b.remove(a,b):b.add(a,b)})}}),c(h).each(function(){c(this).bind(b.trigger,function(){var a=this,e=c(this).find(b.find);h.jqmData("error",{count:0,messages:[]});e.each(function(){b.validate(a,this,b,0)});return c(a).jqmData("error").count?(b.alert(a,c(a).jqmData("error").messages,b),b.fail(a,b)):b.success(a,b)})}),h.jqmData(k,1))}})(jQuery);